import { Vector } from "../../Objects/SpriteTypes";
import { LevelParams } from "../State/LevelBuilder";

export type MapNames = "startingPoint" | "smallTown" | "startingPointBasement";

export type TeleportTileMarker =
  | "0"
  | "1"
  | "2"
  | "3"
  | "4"
  | "5"
  | "6"
  | "7"
  | "8"
  | "9";
type BlankTile = ".";
type MonsterTiles = "m";
export type EntityMarker = BlankTile | MonsterTiles | TeleportTileMarker;

export type TeleportData = {
  comingFrom: MapNames;
  destinationName: MapNames;
  initial: TeleportTileMarker;
  meta: {
    newMapName: MapNames;
    destination: TeleportTileMarker;
    destinationOffset: Vector;
  };
  collision: {
    x: number;
    y: number;
  };
};
export type Teleports = TeleportData[];
export type MapData = {
  validTeleportTiles: TeleportTileMarker[];
  mapName: MapNames;
  mapString: string;
  entityString: string;
  teleportData: Teleports;
  zoomEnabled: boolean;
};

function createMapAndEntityMetaData({
  mapName,
  zoomEnabled,
}: LevelParams): MapData {
  const maps: { [key in MapNames]: MapData } = {
    startingPoint: {
      validTeleportTiles: ["1", "0", "2"],
      mapName: "startingPoint",
      mapString: Map1,
      entityString: EntitiesMap1,
      teleportData: [
        {
          initial: "0",
          meta: {
            destination: "0",
            newMapName: "smallTown",
            destinationOffset: { x: 0, y: 1 },
          },
          comingFrom: "startingPoint",
          destinationName: "smallTown",
          collision: {
            x: 0,
            y: 0,
          },
        },
        {
          initial: "1",
          meta: {
            destination: "0",
            newMapName: "smallTown",
            destinationOffset: { x: 0, y: 1 },
          },
          comingFrom: "startingPoint",
          destinationName: "smallTown",
          collision: {
            x: 0,
            y: 0,
          },
        },
        {
          initial: "2",
          meta: {
            destination: "0",
            newMapName: "startingPointBasement",
            destinationOffset: { x: 0, y: 1 },
          },
          comingFrom: "startingPoint",
          destinationName: "startingPointBasement",
          collision: {
            x: 0,
            y: 0,
          },
        },
      ],
      zoomEnabled,
    },
    smallTown: {
      validTeleportTiles: ["0"],
      mapName: "smallTown",
      mapString: Map2,
      entityString: EntitiesMap2,
      teleportData: [
        {
          initial: "0",
          meta: {
            destination: "0",
            newMapName: "startingPoint",
            destinationOffset: { x: 0, y: -1 },
          },
          comingFrom: "smallTown",
          destinationName: "startingPoint",
          collision: {
            x: 0,
            y: 0,
          },
        },
      ],
      zoomEnabled,
    },
    startingPointBasement: {
      validTeleportTiles: ["0"],
      mapName: "startingPointBasement",
      mapString: Map3,
      entityString: EntitiesMap3,
      teleportData: [
        {
          initial: "0",
          meta: {
            destination: "2",
            newMapName: "startingPoint",
            destinationOffset: { x: 0, y: 1 },
          },
          comingFrom: "startingPointBasement",
          destinationName: "startingPoint",
          collision: {
            x: 0,
            y: 0,
          },
        },
      ],
      zoomEnabled,
    },
  };
  const selection = maps[mapName];
  return selection;
}

export default createMapAndEntityMetaData;

const Map1 = `
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!:==================-====================-=================:!!!!!!!!!!!
!:.......................................*......|______|...==========:!!!
!:.............................************.....|[[[[[[|.............==:!!!!!!!!!!!
!:............****************************......|[[[[[[W|............**====-=====:!
!:...........********************...............|[[[[[[[|............**..........:!
!:.....|____|***................................WWWcWWWWW............**........:==!
!:.....|XXXX|**...........@@@@@@@...............cccc.................******....:!!
!:.....|XXXX|**.........@@@@@@~~~~~~..~~~~r~~~~......................******....:!!
!:.....|XXXX|**.......@@@@@@~~~~~~~~QA~~~~r~~~~~~~~..................******....:!
!:.....___##_**......@@@@@@~~~~%%%%%QA%%%%r%%%%%~~~~.*...............**........:!
!~........##.**.......@@@@@~~~~%%%%%QA%%%%r%%%%%~~~~***..............:==========!
!~........##.**........@@@@@~~~~~~~~QA~~~~r~~~~~~~~******............:!!!!!!!!!!!
!:........cc.**..........@@@@@~~~~~~QA~~~~r~~~~~~//////***...........:!
!:........ccc**............@@@@@@@@@@@@@@@@~~~~~/////////**.......[[[:!
!:...........ccccccccccccccccccccccccccc@@@RRR////////////***.....[[[:!
!:......................................@@@BBB//////////////**.======:!
!:........................................~~~//////////////**........:!
!:........................................bbb///////////////**.......:!
!:........................................~~~////////////////**...@@@:!
!:........................................~~~/////////////////***@@@@:!
!:...........$$$$$$$$$$$$$$$$$$$$$$$......~~~//@///***///////**@@@@@.:!
!:...........***********************......~~~//@*/**.***///***@@@@@@.:!
!:...........***********************......~~~/@@**....********@@@@@..:!
!:...........***|___________|*******......~~~@@@@.....****@@@@@@@@@@@:!
!:...........***|XXXXXXXXXXX|*******......~~~@@@@......@@@@@@@@@@@@@@:!
!:...........***|XXXXXXXXXXX|*******......~~~@@@@......@@@@@@@@@@@@@@:!
!:...........***|XVXXXXXXXXX|*******......~~~@@@@@@......@@@@@@@@@@@@:!
!:...........***|XXXXXXXXXXX____|***......~~~@@@@@@.......@@@@@@@@@@@:!
!:...........***|XXXXXXXXXXXXXXX|***.....@~~~@@@@@@.......@@@@@@@@@@@:!
!:...........***|XXXXXXXXXXXXXXX|***.....@~~~@@@@@@@@@...@@@@@@@@@@@@:!
!:...........***_|XXXXXX|___###__***....@@~~~@@@@@@@@@@@@@@@@@@@@@@@@:!
!:...........****________***c#c*****...@@@~~~@@@@@@@@@@@@@@@@@@@@@@@@:!
!:...........***************ccc*****..@@@@~~~@@@@@@@@@@@@@@@@@@@@@@@@:!
!:...............................@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@......:!
!:..............................@@@@@@@@@@@@@@@@@@@@@@@@@@@@@..:======!
!=====================================~~~~~~~~~~~========~~=====!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
`;
const EntitiesMap1 = `
....................0....................1...................
.......................................................................
.........................................................................
...................................................................................
...................................................................................
....................m..............................................................
.....................m..........................................m..................
..................................................................................
.....................m............................................................
....................m............................................................
.................................................................................
.....................m...........................................................
....................m............................................................
.......................................................................
.......................................................................
.......................................................................
.......................................................................
.......................................................................
.......................................................................
.......................................................................
.......................m...............................................
................................................................m......
.......................................................................
.......................................................................
.......................................................................
.......................................................................
.......................................................................
..................2....................................................
......................................................m................
.......................................................................
.......................................................................
.......................................................................
..............................................................m........
.......................................................................
.......................................................................
.......................................................................
.......................................................................
.................................................................
`;

const Map2 = `
!!!!!!!!!!!!!!!
!.............!!!
!.|______|.......!
!.|XXXXXX|.......!
!.|XXXXXX__|......!
!.|XXXXXXXX|.......!
!.|XXXXXXXX|.......!
!.|XXXXXX|__.......!
!._X______.~~~~..!
!..........~~....!
!.......~~~~~....!!!!!!!
!.......~~~~~.........!!!
!.......~~~~~~.~........!!!!!
!.......~~~~~~~~~~~~~.......!!!
!.......~~~~.~~~~~~~~~~~......!
!.......****..~~~~~~~~~~......!
!.......****..~~~~~~~~/////!!!!
!.......****..~~~/////////!
!.......****.......!!!!!!!!
!.......****.......!
!.......****..!!!!!!
!!!!!!!!!!!!!!!
`;
const EntitiesMap2 = `
...............
.................
..................
..................
...................
.............m......
....................
....................
................m.
................m.
................m.......
...m............m........
................m............
...m...........................
...............................
...............................
...............................
.....m.....................
...........................
.....m..............
....................
.........0....
`;

const Map3 = `
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~!
!~~*********************//////~!
!~~******|___________|*///////~!
!~~~*****|XXXXXXXXXXX|*//////~~!
!~~~*****|XXXXXXXXXXX|*////~~~~!
!~~~*****|XVXXXXXXXXX|*////~~~~!
!~~~~****|XXXXXXXXXXX|*///~~~/~!
!~~~*****|XXXXXXXXXXX|*///~~~/~!
!~~******_____________*//~~~~/~!
!~~********************/~~~~//~!
!~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
`;
const EntitiesMap3 = `
................................
................................
................................
................................
................................
................................
...........0....................
................................
................................
................................
................................
................................
................................
`;

export { Map1, Map2 };
